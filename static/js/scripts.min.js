jQuery(function(e){function p(p,a,t){return!!e(a,p).hasClass(t)}function a(p,a){return!!e(a,p).attr("data-required")}var t=!1;e(document).ready(function(){var s,i,n,m,r=!1,f=!1,c=!1,o=!1,u=!1,l=!1,w=!1,d=!1;e("body").on("submit",".cwpmf",function(_){_.preventDefault(),t||(t=!0,s=e(this),n=s.serialize(),m=s.attr("data-to"),e(".cwpmf-label",s).each(function(p,a){e(".cwpmf-input",this).hasClass("cwpmf-field-with-error")&&(e(".cwpmf-input",this).removeClass("cwpmf-field-with-error"),e(".cwpmf-input-error-msg",this).text("")),e(".cwpmf-textarea",this).hasClass("cwpmf-field-with-error")&&(e(".cwpmf-textarea",this).removeClass("cwpmf-field-with-error"),e(".cwpmf-input-error-msg",this).text(""))}),r=!!p(s,"input","cwpmf-input-firstname"),u=!!a(s,".cwpmf-input-firstname"),f=!!p(s,"input","cwpmf-input-phone"),l=!!a(s,".cwpmf-input-phone"),o=!!p(s,"input","cwpmf-input-email"),w=!!a(s,".cwpmf-input-email"),c=!!p(s,"textarea","cwpmf-input-message"),d=!!a(s,".cwpmf-input-message"),i={action:"_cwpmf_send_email",serial:n,email_to:m,is_firstname:r,is_phone:f,is_email:o,is_message:c,is_firstname_required:u,is_phone_required:l,is_email_required:w,is_message_required:d},e.post(cwpAjax.ajaxurl,i,function(p){switch(p.success){case!0:e(".cwpmf-popup-message").html(p.data.message),e(".cwpmf-popup").css("display","block"),setTimeout(function(){e(".cwpmf-popup").css("z-index","51"),e(".cwpmf-popup").removeClass("fadeOut").addClass("fadeIn"),e(".cwpmf-popup-inner").removeClass("bounceOutUp").addClass("jackInTheBox")},1),e("input, textarea",s).attr("value",""),t=!1;break;case!1:console.log(p.data.message),!1===p.data.firstname[0]&&e("span",s).hasClass("cwpmf-input__firstname")&&(e(".cwpmf-input__firstname").closest(".cwpmf-label").find("input").addClass("cwpmf-field-with-error"),e(".cwpmf-input__firstname .cwpmf-input-error-msg",s).text(p.data.firstname[1])),!1===p.data.phone[0]&&e("span",s).hasClass("cwpmf-input__phone")&&(e(".cwpmf-input__phone").closest(".cwpmf-label").find("input").addClass("cwpmf-field-with-error"),e(".cwpmf-input__phone .cwpmf-input-error-msg",s).text(p.data.phone[1])),!1===p.data.email[0]&&e("span",s).hasClass("cwpmf-input__email")&&(e(".cwpmf-input__email").closest(".cwpmf-label").find("input").addClass("cwpmf-field-with-error"),e(".cwpmf-input__email .cwpmf-input-error-msg",s).text(p.data.email[1])),!1===p.data.textarea[0]&&e("span",s).hasClass("cwpmf-input__message")&&(e(".cwpmf-input__message").closest(".cwpmf-label").find("textarea").addClass("cwpmf-field-with-error"),e(".cwpmf-input__message .cwpmf-input-error-msg",s).text(p.data.textarea[1])),t=!1;break;default:console.log("Unknown error!"),t=!1}}))}),e("body").on("click",".cwpmf-popup__close, .cwpmf-popup-button__link",function(p){p.preventDefault(),e(".cwpmf-popup-inner").removeClass("jackInTheBox").addClass("bounceOutUp"),e(".cwpmf-popup").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){e(".cwpmf-popup").css("display","none"),e(".cwpmf-popup-message").html(""),e(".cwpmf-popup").css("z-index","-1")},1e3)})})});