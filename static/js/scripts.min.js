jQuery(function(a){var e=!1;a(document).ready(function(){var t,p,s,i,n,r,u;a("body").on("submit",".cwpmf",function(c){c.preventDefault(),e||(e=!0,t=a(this),s=t.attr("data-to"),u=a("#cwpmf_nonce_field",t).val(),a("input, textarea",t).removeClass("cwpmf-field-with-error"),a(".cwpmf-input-error-msg",t).text(""),i=new Array,a("input",t).hasClass("cwpmf-input-text")&&a(".cwpmf-input-text").each(function(e,t){i.push({type:"text",id:a(this).attr("id"),required:a(this).attr("data-required"),value:a(this).val()})}),a("input",t).hasClass("cwpmf-input-name")&&a(".cwpmf-input-name").each(function(e,t){i.push({type:"name",id:a(this).attr("id"),required:a(this).attr("data-required"),value:a(this).val()})}),a("input",t).hasClass("cwpmf-input-phone")&&a(".cwpmf-input-phone").each(function(e,t){i.push({type:"phone",id:a(this).attr("id"),required:a(this).attr("data-required"),value:a(this).val()})}),a("input",t).hasClass("cwpmf-input-email")&&a(".cwpmf-input-email").each(function(e,t){i.push({type:"email",id:a(this).attr("id"),required:a(this).attr("data-required"),value:a(this).val()})}),a("textarea",t).hasClass("cwpmf-input-message")&&a(".cwpmf-input-message").each(function(e,t){i.push({type:"message",id:a(this).attr("id"),required:a(this).attr("data-required"),value:a(this).val()})}),p={action:"_cwpmf_send_email",email_to:s,nonce:u,fields_array:i},a.post(cwpAjax.ajaxurl,p,function(p){switch(p.success){case!0:a(".cwpmf-popup-message").html(p.data.message),a(".cwpmf-popup").css("display","block"),setTimeout(function(){a(".cwpmf-popup").css("z-index","51"),a(".cwpmf-popup").removeClass("fadeOut").addClass("fadeIn"),a(".cwpmf-popup-inner").removeClass("bounceOutUp").addClass("jackInTheBox")},1),a("input, textarea",t).attr("value",""),e=!1;break;case!1:if(console.log(p.data.message),p.data.array)for(n=0;n<p.data.array.length;n++)""!=p.data.array[n].message&&(r="#"+p.data.array[n].id,a(r,t).addClass("cwpmf-field-with-error"),a(r,t).closest(".cwpmf-label").find(".cwpmf-input-error-msg").text(p.data.array[n].message));e=!1;break;default:console.log("Unknown error!"),e=!1}}))}),a("body").on("click",".cwpmf-popup__close, .cwpmf-popup-button__link",function(e){e.preventDefault(),a(".cwpmf-popup-inner").removeClass("jackInTheBox").addClass("bounceOutUp"),a(".cwpmf-popup").removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){a(".cwpmf-popup").css("display","none"),a(".cwpmf-popup-message").html(""),a(".cwpmf-popup").css("z-index","-1")},1e3)})})});